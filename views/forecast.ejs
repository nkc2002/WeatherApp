<%- include('partials/header') %>

<div class="container mx-auto px-4 py-8 min-h-screen">
  <!-- Back Button -->
  <div class="max-w-7xl mx-auto mb-6 fade-in">
    <a
      href="/"
      class="inline-flex items-center gap-2 text-white/90 hover:text-white font-medium transition-all hover:-translate-x-1 p-2 rounded-lg hover:bg-white/10"
    >
      <i class="fas fa-arrow-left"></i>
      Quay lại trang chủ
    </a>
  </div>

  <!-- Header -->
  <div class="max-w-7xl mx-auto mb-8 fade-in delay-100">
    <div class="glass rounded-[2rem] p-8 text-white relative overflow-hidden">
      <div class="absolute top-0 right-0 -mt-10 -mr-10 opacity-10">
        <i class="fas fa-calendar-week text-[12rem]"></i>
      </div>
      <div class="relative z-10">
        <h1 class="text-3xl md:text-5xl font-bold mb-3 flex items-center gap-4">
          <span class="bg-white/20 p-3 rounded-2xl backdrop-blur-sm">
            <i class="fas fa-chart-line text-2xl md:text-4xl"></i>
          </span>
          Dự báo 5 ngày
        </h1>
        <p class="text-xl opacity-90 ml-2">
          <i class="fas fa-map-marker-alt mr-2 text-red-300"></i>
          <%= city.name %>, <%= city.country %>
        </p>
      </div>
    </div>
  </div>

  <!-- Forecast Cards -->
  <div class="max-w-7xl mx-auto fade-in delay-200">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
      <% forecasts.forEach((forecast, index) => { %>
      <div
        class="glass rounded-3xl overflow-hidden hover:transform hover:scale-105 transition-all duration-300 group flex flex-col"
      >
        <!-- Day Header -->
        <div
          class="<%= index === 0 ? 'bg-white/30' : 'bg-white/10' %> p-4 text-white text-center backdrop-blur-md border-b border-white/10"
        >
          <p class="font-bold text-lg">
            <%= index === 0 ? 'Hôm nay' : forecast.dayName %>
          </p>
          <p class="text-xs opacity-80 font-medium tracking-wide">
            <%= forecast.dateString %>
          </p>
        </div>

        <!-- Weather Icon -->
        <div class="flex justify-center py-6 relative">
          <div
            class="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent"
          ></div>
          <img
            src="http://openweathermap.org/img/wn/<%= forecast.icon %>@2x.png"
            alt="<%= forecast.description %>"
            class="w-24 h-24 float-animation relative z-10 drop-shadow-lg"
          />
        </div>

        <!-- Temperature -->
        <div class="text-center pb-6 text-white flex-grow">
          <div class="text-5xl font-bold mb-2 tracking-tight">
            <%= Math.round(forecast.temp) %>°
          </div>
          <p
            class="text-sm font-medium capitalize mb-4 px-2 opacity-90 bg-white/10 inline-block rounded-full py-1 px-3"
          >
            <%= forecast.description %>
          </p>
          <div class="flex justify-center gap-6 text-sm">
            <span class="flex items-center gap-1 font-medium">
              <i class="fas fa-arrow-up text-red-300"></i>
              <%= Math.round(forecast.temp_max) %>°
            </span>
            <span class="flex items-center gap-1 font-medium">
              <i class="fas fa-arrow-down text-blue-300"></i>
              <%= Math.round(forecast.temp_min) %>°
            </span>
          </div>
        </div>

        <!-- Additional Info -->
        <div class="border-t border-white/10 p-4 bg-black/5 space-y-3">
          <div class="flex items-center justify-between text-xs text-blue-100">
            <span class="flex items-center gap-2">
              <i class="fas fa-tint text-cyan-300 w-4 text-center"></i>
              Độ ẩm
            </span>
            <span class="font-bold text-white"><%= forecast.humidity %>%</span>
          </div>
          <div class="flex items-center justify-between text-xs text-blue-100">
            <span class="flex items-center gap-2">
              <i class="fas fa-wind text-indigo-300 w-4 text-center"></i>
              Gió
            </span>
            <span class="font-bold text-white"
              ><%= Math.round(forecast.wind_speed * 3.6) %> km/h</span
            >
          </div>
          <div class="flex items-center justify-between text-xs text-blue-100">
            <span class="flex items-center gap-2">
              <i class="fas fa-cloud text-gray-300 w-4 text-center"></i>
              Mây
            </span>
            <span class="font-bold text-white"><%= forecast.clouds %>%</span>
          </div>
        </div>
      </div>
      <% }); %>
    </div>

    <!-- Info Banner -->
    <div
      class="mt-8 glass rounded-2xl p-6 border-l-4 border-white/50 flex items-start gap-4"
    >
      <i class="fas fa-info-circle text-2xl text-white mt-1"></i>
      <div>
        <h3 class="font-bold text-white mb-1">Thông tin dự báo</h3>
        <p class="text-blue-100 text-sm leading-relaxed">
          Dự báo thời tiết được cập nhật định kỳ từ OpenWeather API. Dữ liệu
          hiển thị theo giờ địa phương.
        </p>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="mt-10 flex flex-wrap gap-4 justify-center pb-8">
      <a
        href="/weather?city=<%= city.name %>"
        class="px-8 py-4 bg-white text-primary font-bold rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 flex items-center gap-2"
      >
        <i class="fas fa-cloud-sun"></i>
        Xem thời tiết hiện tại
      </a>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
